P = [382     0.3497735
383     0.4043452
384     0.2791683
385     0.4542913
386     0.4897625
387     0.4256295
388    -0.2580604
389      0.478739
390     0.4360733
391     0.3139871
392      0.292524
393     0.1317261
394  -0.008365495
395     0.3522887
396    -0.5262732
397    -0.5840148
398    -0.5809015
399     0.0830996
400     0.1880194
401    -0.4261131
402    -0.1792712
403    -0.2314301
404     0.1174326
405    0.08733708
406   -0.02169891
407      -0.22966
408    -0.2965333
409    -0.5823083
410    -0.4869773
411     -0.590535
412    -0.3929787
413    -0.4343084
414    -0.5345266
415    -0.4136386
416    -0.4316522
417    -0.3085779
418    -0.1044287
419   -0.01922042
420    -0.1729711
421  -0.005701649
422     0.1425648
423  -0.008197328
424     0.1219838
425     -0.166922
426    -0.3149474
427     0.1978728
428    -0.7084981
429    0.08590097
430     0.2410293
431    -0.5431557
432     0.2333016
433  -0.009644543
434     0.2679584
435    -0.4739385
436     -0.495385
437     0.2435674
438    -0.4571333
439    -0.4975403
440     0.3222925
441     0.3423107
442     0.4624594
443     0.4826831
444     0.4829264
445     0.2031338
446     0.3032496
447     0.4632186
448      0.162986
449     0.2024971
450     0.3016984
451     0.3405368
452    -0.2610399
453   -0.04308247
454     0.3343591
455     0.6912364
456     0.4875024
457     0.6831116
458     0.2580202
459    0.05218651
460   -0.03442962
461    -0.1018661
462     0.6898414
463     0.4206592
464     0.3305563
465     0.3795039
466     0.4474759
467     0.4344485
468      0.520401
469      0.765315
470     0.8491753
471     0.1119693
472    0.07368723
473     0.3543225
474     0.5338713
475     0.5723328
476     0.5697093
477     0.8260058
478   -0.03876934
479      0.115395
480      0.188513
481     0.4206017
482     0.4916813
483     0.3817744
484      0.390907
485     0.3991075
486     0.8264071
487    0.07283977
488     0.1984419
489     0.2032524
490     0.1073126
491     0.1106662
492      0.153359
493      0.115439
494    0.09695604
495      0.177962
496     0.4185103
497     0.5386562
498    -0.2415438
499    -0.2420317
500    -0.1627484
501    -0.2236337
502    0.07537353
503    -0.2456649
504  -0.006686644
505    -0.1276287
506    -0.1284281
507    -0.3090214
508    0.07065445
509   -0.06933743
510    -0.1289344
511    0.05192554
512     0.1933039
513    0.05526135
514     0.2378573
515    0.08115035
516    -0.1748025
517     0.1500544
518    0.09577502
519    -0.6175882
520      0.230015
521    -0.1013671
522   -0.05168809
523    0.09909577
524     -0.488974
525    -0.6358584
526    -0.4015212
527    -0.5459287
528    -0.7890503
529      0.169142
530    0.08867301
531    -0.6504356
532    -0.7481653
533    -0.6045005
534    -0.3394293
535    -0.3129428
536    -0.1650355
537    -0.6757053
538    0.05504642
539    -0.6527849
540    -0.5792075];
 
X = P(:,1); 
Y = P(:,2);

plot(X, Y, 'r'); 
hold on; 
grid on;
xlabel('Time');
ylabel('Price');
l = length(P);
text(X(1), Y(1)+0.5, 'Semenenko Illia', 'Fontsize', 11);


n = length(X); 
Sx = 0; 
Sy = 0; 
Sxx = 0; 
Sxy = 0; 
for i = 1:length(X) 
    Sx = Sx + X(i); 
    Sy = Sy + Y(i); 
    Sxx = Sxx + X(i) * X(i); 
    Sxy = Sxy + X(i) * Y(i); 
end 
a = (Sx/n * Sy/n - Sxy/n)/(Sx/n*Sx/n - Sxx/n)
b = (Sxy/n - a*Sxx/n)/(Sx/n) 
plot(X,a*X + b, 'g'); 


d = 4; 
AA = zeros(d+1,d+1); 
for y = 1:d+1 
    for x =1:d+1 
        AA(y,x) = sum(X.^(x-1).*(X.^(y-1))); 
    end 
    BB(y,1) = sum(Y.*(X.^(y-1))); 
end 
aA = AA^-1*BB

approx = zeros(length(X)); 
for i = 1:d+1 
    approx = approx + aA(i)*X.^(i-1); 
end 
plot(X,approx, 'b'); 
legend('Initial','Linear','Polynomial'); 
hold off; 



